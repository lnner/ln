<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
  <script src="jquery.js"></script>
  <link rel="stylesheet" href="css/iconfont.css">

  <style>
    *{
      list-style:none;
      text-decoration: none;
    }
    .pr{
      position:relative;
    }
    .pa{
      position:absolute;
    }
    .video_watch{
      width:800px;
      height:500px;
      margin:50px auto;
      border:1px solid blue;
    }
    .video{
      width:80%;
      height:90%;
      left:0;
      background:pink;
    }
    .video_list{
      width:20%;
      height:90%;
      right:0;
      text-align:center;
      /*color:#fff;*/
      background:grey;
    }
    .video_list a{
      font-size:18px;
      color:#fff;
    }
    .video_controls{
      width:100%;
      height:10%;
      bottom:0;
      background:#fff;
    }
    .play,.stop{
      left:5%;
      top:50%;
      transform:translateY(-50%);
    }
    .play{
      display:none;
    }
    .voice{
      right:5%;
      top:50%;
      transform:translateY(-50%);
    }
    .progress{
      left:50%;
      top:50%;
      width:650px;
      transform:translate(-50%,-50%);
    }
    .volume{
      right: -18px;
      top: -77px;
      transform:rotateZ(-90deg);
    }
    .iconfont{
      font-size:25px;
      color:yellow;
    }
    .hide{
      display:none;
    }
  </style>
</head>
<body>
    <input id='input_id' type="text">

    <div class="video_watch pr">
      <video src="逗比集结地.mp4" class="video pa" autoplay></video>
      <div class="video_list pa">
        <li><a href="javascript:;" data-src="逗比集结地.mp4">逗比集结地</a></li>
        <li><a href="javascript:;" data-src="猫和老鼠.mp4">猫和老鼠</a></li>
        <li><a href="javascript:;" data-src="蜡笔小新.mp4">蜡笔小新</a></li>
      </div>
      <div class="video_controls pa">
        <a href="javascript:;" class="iconfont icon-bofang play pa"></a>
        <a href="javascript:;" class="iconfont icon-zanting stop pa"></a>
        <a href="javascript:;" class="iconfont icon-shengyin voice pa"></a>
        <input type="range" class="progress pa" value=0>
        <input type="range" class="volume pa hide" max=1 min=0 value=1 step=0.1>
      </div>
    </div>
</body>
<script>
  // change 用于监视文本的变动
  $( '#input_id' ).on('change', function () {
    alert( `文本输入为 ${ $(this).val() }` ); // ES6 ${} 模板的写法
    // alert(  '文本输入为' + $(this).val() );
  });

  $(function(){ // 入口函数

    let video = $('.video'),
        videoLenght = video.duration,
        videoVolume = $('.volume'),
        videoProgress = $('.progress');

    // 检测是佛可以播放，可播放则获取当前视频的播放时长
    video.on('canplay', function(){
      console.log( this.duration );
      videoProgress.min = 0;
      // $('.progress').max = this.direction; 这里是 duration
      videoProgress.max = this.duration;
      videoProgress.step = 1;
    });

    // 播放期间更新视频进度指示条
    video.on('timeupdate',function(){
      videoProgress.val( this.currentTime );
      // videoProgress.val = $('.video').currentTime;
      //
      // $("input").val(); 用于获取值
      // $("input").val("hello world!"); 用于设置值
      // 首先是要分清原生 js 和 jq 的获取值、设置值的方法
    });

    // 自定义播放进度
    videoProgress.on('change',function(){
      video[0].currentTime = $(this).val();
      // video 是 jq 对象，通过索引 0 获取我们想要得到的 js 对象
    });

    // 自定义音量大小
    videoVolume.on('change',function(){
      video[0].volume = $(this).val();
    });
    // 音量控制条是否显示
    $('.voice').click(function(){
      $('.volume').toggleClass('hide');
    });
    // 停止播放按钮
    $('.stop').click(function(){
      $('.play').attr({'style':'display:block'});
      $(this).attr({'style':'display:none'});
      video[0].pause();
    });
    // 停止播放按钮
    $('.play').click(function(){
      $('.play').attr({'style':'display:none'});
      $('.stop').attr({'style':'display:block'});
      video[0].play();
    });

    $('.video_list a').each(function(index,element){
      $(element).on('click',function(){
        video[0].src = this.dataset.src;
        video.attr({'autoplay': true}); // 切换视频的时候让它自动播放
      });
    });

  }) // 入口函数结束
    </script>
</html>
